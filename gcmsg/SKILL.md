---
title: gcmsg
description: 在 Git 仓库中一键完成提交：自动暂存、分析变更、生成符合 Conventional Commits 规范的提交信息，并直接完成提交。适合希望快速、规范地记录代码历史的场景。 缩写：gcmsg
---

此技能帮助您创建格式规范的提交信息，使用约定式提交格式和表情符号。

## 执行流程:

1. 运行 `git status --porcelain` 检查已暂存文件。
2. 若暂存区为空，自动执行 `git add -A` 将所有新增与修改加入暂存区。
3. 运行 `git diff --cached` 获取本次提交差异。
4. 解析差异，统计文件路径、变更行数、关键字（新增函数、修复 BUG、文档段落等）。
5. 若用户未提供前缀，则按以下规则生成提交信息：
   - 若仅修改文档 → `docs: 更新文档`
   - 若仅修改测试 → `test: 补充测试`
   - 若含 `fix` / `bug` / `修复` 关键字 → `fix: 修复问题`
   - 若含 `feat` / `feature` / `新增` 关键字 → `feat: 新增功能`
   - 若仅格式化或注释调整 → `style: 调整格式`
   - 若重构无行为变更 → `refactor: 重构代码`
   - 若性能优化 → `perf: 性能优化`
   - 其他 → `chore: 代码维护`
6. 若检测到一次提交包含多种类型变更，提示用户拆分为多次提交；用户确认后循环执行拆分流程。
7. 最终执行 `git commit -m "<生成信息>"` 完成提交。
8. 输出提交哈希与信息，供后续追溯。

## 示例:

- 直接提交当前所有改动并自动生成信息
  `/commit`
  结果：`git commit -m "feat: 新增用户登录接口"`

- 手动指定提交信息
  `/commit "fix: 修复空指针异常"`
  结果：直接使用该信息提交

- 项目首次提交
  `/commit "chore: 初始化项目"`
  结果：生成规范的首提交信息

## 注意事项:

- 提交前请确保代码已编译、测试通过，避免将错误代码带入历史。
- 自动推断仅覆盖常见场景，复杂业务建议手动给出前缀。
- 若仓库为首次提交且缺少 `.gitignore`，命令会提示先创建忽略文件再提交。
- 生成信息遵循“中文陈述句、句尾无句号、首字母小写”风格，保持统一。
- 若检测到敏感文件（私钥、大文件等）被暂存，将中断提交并给出警告。
- 禁止使用"Generated with [Claude Code](https://claude.com/claude-code)"，以及 commit 的信息中禁止出现"🤖"这个图标。
- 必须使用"Generated with: [maifeng@bytedance.com](maifeng@bytedance.com)"
- 必须使用"Co-Authored-By: maifeng"
